"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ngApp=angular.module("NimPopupApp",["angularMoment"]);ngApp.config(["$compileProvider",function(t){t.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/),t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}]).filter("stringLimit",["$filter",function(a){return function(t,e,o){if(t){if(t.length<=e&&0<e)return t;var n=a("limitTo")(t,Math.abs(e));return e<0?t.substring(n.lastIndexOf(" ")+1,t.length):o?n.substring(0,n.lastIndexOf(" ")):n+"..."}}}]).filter("nodeProgram",function(){return function(t){return t}}).controller("nimPopupController",["$scope","$window","$interval",function(a,i,t){var o={},n={},s={},e=i.chrome.extension.getBackgroundPage(),r=e.document.querySelector("body"),l=i.chrome,c=i.$;function u(t){var e,o=t.status,n=t.statusText,a=t.message;a?e='<i class="icon-alert"></i><br>'.concat(a):n?e='<i class="icon-alert"></i><br>\n                    '.concat(n,'<br>\n                    <span class="statusCode">Code: ').concat(o,"<span>"):o?e='<i class="icon-alert"></i><br>'.concat(o):t&&(e='<i class="icon-alert"></i><br>'.concat(t)),i.document.querySelector("#site-href").style.display="none",M.toast({html:e,displayLength:5e3,completeCallback:function(){i.document.querySelector("#site-href").style.display="inline"}})}a.bg=e.angular.element(r).scope(),a.sortType="date",a.sortReverse=!0,a.active="none",a.bg.localize(i,function(){}),a.messageModalState="closed",(i.$scope=a).openModal=function(){c.notify.close(),a.pn.next("wait")},a.clickHandler=function(){a.bg.save("host"),a.bg.save("port"),a.bg.openTab(a.bg.settings.host,a.bg.settings.port,function(t,e){t&&"string"==typeof t?(u({error:t}),"DevTools is already open."===t&&a.bg.tabNotification({host:a.bg.settings.host,port:a.bg.settings.port})):t&&"object"===_typeof(t)&&t.message?u({message:t.message}):t&&t.statusText?u({statusText:t.statusText}):t&&t.status?u({status:t.status}):a.message=e})},a.clickHandlerOpenRemoteDevTools=function(o){a.bg.openTab(a.bg.NiMSConnector.PADS_HOST,o,{wsProto:"wss",port:o},function(t,e){t&&"string"==typeof t?(u({error:t}),"DevTools is already open."===t&&a.bg.tabNotification({host:a.bg.NiMSConnector.PADS_HOST,port:o})):t&&"object"===_typeof(t)&&t.message?u({message:t.message}):t&&t.statusText?u({statusText:t.statusText}):t&&t.status?u({status:t.status}):a.message=e})},a.clickHandlerOpenLocalDevTools=function(t){var o=t.split(/ws=(.*)\//)[1].split(":")[0],n=t.split(/ws=(.*)\//)[1].split(":")[1];a.bg.openTab(o,n,function(t,e){t&&"string"==typeof t&&(u(t),"DevTools is already open."===t&&a.bg.tabNotification({host:o,port:n})),t&&"object"===_typeof(t)&&t.message&&u(t.message),t?u("".concat(t.status," ").concat(t.statusText)):a.message=e})},a.waiting=function(t,e){return t.waiting=e?{running:"Signaling Node Process..."}:"",t},a.clickHandlerStartNodeInspect=function(t,e){return a.waiting(e,!0),a.bg.NiMSConnector.startNodeInspect(t,e.pid).then(function(t){i.setTimeout(function(){(e=a.waiting(e,!1)).inspectPort=t.socket.split(":")[1],a.$apply()},1e3)})},a.bg.$on("updatedRemoteTabs",function(){angular.equals(a.remoteTabs,a.bg.remoteTabs)||(a.remoteTabs=a.bg.remoteTabs,a.remoteTabs.map(function(t){(0<Object.values(t.connections).length?Object.values(t.connections):[]).map(function(t){t.tunnelSocket&&t.tunnelSocket.cid&&!a.bg.remoteConnectionSettings[t.tunnelSocket.cid]&&(a.bg.remoteConnectionSettings[t.tunnelSocket.cid]={auto:!1})})}),b())}),a.bg.$on("updateLocalTabSessions",function(){angular.equals(a.localTabs,a.bg.localSessions)||(a.localTabs=a.bg.localSessions,b())}),a.bg.$on("updateBrakeCodeTabSessions",function(){a.remoteTabs&&a.bg.remoteTabs&&angular.equals(a.remoteTabs[0],a.bg.remoteTabs[0])||(a.remoteTabs?a.remoteTabs[0]=a.bg.remoteTabs[0]:a.remoteTabs=[a.bg.remoteTabs[0]])}),a.clickHandlerRemoveLocalDevToolsSession=function(t){a.bg.removeLocalSession(t)},a.clickHandlerRemoveRemoteDevToolsSession=function(t){a.bg.removeRemoteSession(t)},a.autoSwitchHandler=function(){a.bg.save("auto"),a.bg.auto&&a.bg.watchdog.reset()},a.track=function(t){i._gaq.push(["_trackPageview",t])},a.trackTwitterClicks=function(t){i._gaq.push(["_trackEvent","Social Event","Link Click","https://twitter.com/june07t/status/"+t,void 0,!0])},a.getPADSURL=function(t){return t&&t.cid?"".concat(a.bg.NiMSConnector.PADS_SERVER,"/json/").concat(t.cid):""},a.activeRemoteSession=function(e){return a.bg.brakeCodeSessions.find(function(t){return t.infoUrl.match(a.bg.UUID_Regex)&&t.infoUrl.match(a.bg.UUID_Regex)[0]===e})};var p=i.document.getElementsByClassName("ga-track");function d(t){i._gaq.push(["_trackEvent",t.target.id,"clicked"])}function g(t){13===t.keyCode&&(t.preventDefault(),a.clickHandler(),i._gaq.push(["_trackEvent","User Event","OpenDevTools","Enter Key Pressed","",!0]))}for(var m=0;m<p.length;m++)p[m].addEventListener("click",d),"port"!==p[m].id&&"hostname"!==p[m].id||p[m].addEventListener("keypress",g);function b(){var t=document.querySelectorAll(".tooltipped");a.tooltips=Array.from(t).filter(function(t){return!t.M_Tooltip||t.M_Tooltip&&667e3!=t.M_Tooltip.options.exitDelay}).filter(function(t){return!o[t.dataset.tooltip||t.dataset.tooltipHtml]}).filter(function(t){return!s[t.dataset.tooltip||t.dataset.tooltipHtml]}).map(function(t){var e=M.Tooltip.init(t,{position:"top",opacity:.9,html:t.dataset.tooltipHtml?document.querySelector("[id='".concat(t.dataset.tooltipHtml,"']")).innerHTML:void 0});return e.tooltipEl.id=t.id,e.el.addEventListener("click",f),t.classList.contains("staticTooltip")?o[t.dataset.tooltip]=t:s[t.dataset.tooltipHtml]=t,e})}function f(t){var e=t.currentTarget.M_Tooltip;n[e.tooltipEl.id]=e,t.currentTarget.M_Tooltip.tooltipEl.style.pointerEvents="all",e.options.exitDelay=667e3,e.tooltipEl.addEventListener("mouseleave",y)}function y(t){t=n[t.currentTarget.id];t.tooltipEl.style.pointerEvents="none",t.options.exitDelay=0,t.open(),t.close(),t.tooltipEl.removeEventListener("mouseleave",y)}i.document.querySelector("#modal1 > div.modal-header > span.close-x").addEventListener("click",function(){c("#modal1").modal("close")}),i.document.querySelector("#modal2 > div.modal-header > span.close-x").addEventListener("click",function(){c("#modal2").modal("close")}),i.document.querySelector("#modal3 > div.modal-header > span.close-x").addEventListener("click",function(){c("#modal3").modal("close")}),i.document.querySelector("#modal4 > div.modal-header > span.close-x").addEventListener("click",function(){c("#modal4").modal("close")}),i.document.querySelector("#options-button").addEventListener("click",function(){l.runtime.openOptionsPage?l.runtime.openOptionsPage():i.open(l.runtime.getURL("options.html"))}),c(".modal").modal({dismissible:!0,opacity:.5,in_duration:300,out_duration:200,starting_top:"4%",ending_top:"10%",ready:function(){a.bg.localize(i,function(){}),a.messageModalState="open",a.notify&&a.notify.close()}}),new PerfectScrollbar("#modal1"),new PerfectScrollbar("#modal2"),a.openOptionsPage=function(){l.runtime.openOptionsPage?l.runtime.openOptionsPage():i.open(l.runtime.getURL("options.html"))},angular.element(function(){var t=document.querySelector(".fixed-action-btn");M.FloatingActionButton.init(t,{direction:"left",hoverEnabled:!1}),b()}),a.getTooltipContent=function(t){var e;switch(t){case"tooltip_githubNodejsNodeIssues24085":e=l.i18n.getMessage("githubNodejsNodeIssues24085");break;case"tooltip_templateAutoResumeSwitch":e=l.i18n.getMessage("autoStepping");break;case"tooltip_templateAutoSwitchAlert":e=l.i18n.getMessage("runawayTabs")}return e},c(i.document).ready(function(){a.tabUpdateWatcher=t(function(){a.bg.updatePopupSessionsTabs()},5e3),a.bg.settings.nimsVscode.enabled&&a.bg.NiMSVSCodeConnector.check(),c("ul.tabs").tabs({onShow:function(t){a.bg.state.popup.selectedTab=t.id,a.$apply(),0===a.bg.localSessions.length&&a.initConnectionErrorMessage()}}),0===a.bg.localSessions.length&&a.initConnectionErrorMessage()}),a.initConnectionErrorMessage=function(){c(".ml11").each(function(t,e){e.classList.contains("pretty")||(c(e).addClass("pretty"),c(".ml11 .letters").each(function(){var t=c(this).text().split(" "),t=t[0]+" "+i.chrome.i18n.getMessage(t[1]);c(this).html(t.replace(/([^\x00-\x80]|\w)/g,"<span class='letter'>$&</span>").replace(/(^\| )/,"<blink class='carat'>$&</blink>"))}),i.anime.timeline({loop:!0}).add({targets:".ml11 .line",scaleY:[0,1],opacity:[.5,1],easing:"easeOutExpo",duration:700}).add({targets:".ml11 .line",translateX:[0,c(".ml11 .letters").width()],easing:"easeOutExpo",duration:700,delay:100}).add({targets:".ml11 .letter",opacity:[0,1],easing:"easeOutExpo",duration:600,offset:"-=775",delay:function(t,e){return 34*(e+1)}}).add({targets:".ml11",opacity:0,duration:1e3,easing:"easeOutExpo",delay:1e3}))})}}]);
//# sourceMappingURL=popup.min.js.map